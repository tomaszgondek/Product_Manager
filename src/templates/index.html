<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Products</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<div class="container">
    <h1 class="mb-4">Products</h1>

    {% if errors %}
    <div class="alert alert-danger">
        <ul class="mb-0">
        {% for field, msg in errors.items() %}
            <li><strong>{{ field }}:</strong> {{ msg }}</li>
        {% endfor %}
        </ul>
    </div>
    {% endif %}

    <form method="post" action="/ui/add" class="row g-2 mb-4">
        <div class="col-md-3"><input name="name" class="form-control" placeholder="Name" required value="{{ form.name if form and form.name else '' }}"></div>
        <div class="col-md-2">
            <select name="category" class="form-select" required>
                {% for c in ['Electronics','Books','Clothing'] %}
                <option value="{{ c }}" {% if form and form.category == c %}selected{% endif %}>{{ c }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col-md-2"><input name="price" type="number" step="0.01" class="form-control" placeholder="Price" required value="{{ form.price if form and form.price else '' }}"></div>
        <div class="col-md-2"><input name="quantity" type="number" min="0" class="form-control" placeholder="Quantity" required value="{{ form.quantity if form and form.quantity else '' }}"></div>
        <div class="col-md-3"><button class="btn btn-success w-100">Add product</button></div>
        <div class="col-12"><input name="description" class="form-control mt-2" placeholder="Description" value="{{ form.description if form and form.description else '' }}"></div>
    </form>

    <table class="table table-striped align-middle">
        <thead><tr><th>ID</th><th>Name</th><th>Category</th><th>Price</th><th>Quantity</th><th>Actions</th></tr></thead>
        <tbody>
        {% for p in products %}
        <tr>
            <td>{{ p.id }}</td>
            <td>{{ p.name }}</td>
            <td>{{ p.category }}</td>
            <td>{{ '%.2f'|format(p.price) }}</td>
            <td>{{ p.quantity }}</td>
            <td>
                <a href="/ui/edit/{{ p.id }}" class="btn btn-sm btn-primary">Edit</a>
                <form method="post" action="/ui/delete/{{ p.id }}" style="display:inline;">
                    <button class="btn btn-sm btn-danger" onclick="return confirm('Delete {{ p.name }}?')">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <hr>
    <h3>Banned phrases</h3>
    <form method="post" action="/ui/add_banned" class="row g-2 mb-3">
        <div class="col-md-6"><input name="phrase" class="form-control" placeholder="New phrase..." required></div>
        <div class="col-md-3"><button class="btn btn-warning w-100">Add phrase</button></div>
    </form>
    <ul class="list-group">
        {% for b in banned_phrases %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            {{ b.phrase }}
            <form method="post" action="/ui/delete_banned/{{ b.id }}" style="display:inline;">
                <button class="btn btn-sm btn-outline-danger">Remove</button>
            </form>
        </li>
        {% endfor %}
    </ul>
</div>
</body>
</html>
